<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <title>Creat</title>
</head>
<script>
  async function welcome() {
    window.addEventListener("pageshow", function (event) {
      var historyTraversal =
        event.persisted ||
        (typeof window.performance != "undefined" &&
          window.performance.navigation.type === 2);
      if (historyTraversal) {
        // Handle page restore.
        window.location.reload();
      }
    });
    const response = await fetch("http://localhost:8083/link11");

    const data = await response.json();

    const course = data.course;
    console.log(course);
    document.getElementById("div").innerHTML =
      "To fill out the    " + course + " course form : ";
  }
  async function updateF() {
    $(document).on("submit", "#form1", function (e) {
      $.ajax({
        url: $(this).attr("action"),
        type: $(this).attr("method"),
        data: $(this).serialize(),
        success: async function (html) {
          let request = async () => { };
          await request();
        },
      });
      e.preventDefault();
    });
  }
  $(document).ready(async function () {
    await welcome();
    await updateF();
  });
</script>
<script>
  fetch('/options')
    .then(response => response.json())
    .then(data => {
      const select = document.getElementById('course');
      data.map(option => {
        const optionElement = document.createElement('option');
        optionElement.value = option.value;
        optionElement.text = option.text;
        select.appendChild(optionElement);
      })
    })
</script>

<body>
  <form action="/course" method="post" id="form1">
    
    <label for="course">Choose a course</label>
    <select id="course"></select>
    <!-- <select name="course" id="course">
      <option value=""></option>
      <option value="German">German</option>
      <option value="Frensh">Frensh</option>
      <option value="Russian">Russian</option>
      <optgroup>
        <option value="Kids">English for kids</option>
        <option value="Beginner">Beginner level English</option>
        <option value="Intermediate">Beginner level English</option>
        <option value="Advanced">Advanced level English</option>
        <option value="ibt1">IBT1 level English</option>
        <option value="ibt2">IBT2 level English</option>
        <option value="pbt1">PBT1 level English</option>
        <option value="pbt2">PBT2 level English</option>
      </optgroup>
    </select> -->

    <div id="div"></div>
    <label for="number">Number of student</label>
    <input type="number" name="number_student" id="number" />
    <br /><br />
    <label for="price">price of course</label>
    <input type="number" name="price" id="price" />
    <br /><br />
    <label for="time">Choose work hours</label>
    <select name="times" id="time">
      <option value="8am">8 Am</option>
      <option value="9am">9 Am</option>
      <option value="10am">10 Am</option>
      <option value="11am">11 Am</option>
      <option value="12am">12 Am</option>
      <option value="1pm">1 Pm</option>
      <option value="2pm">2 Pm</option>
      <option value="3pm">3 Pm</option>
      <option value="4pm">4 Pm</option>
      <option value="5pm">5 Pm</option>
      <option value="6pm">6 Pm</option>

    </select>
    <br /><br />
    <label>Choose working days</label>


    <label for="days1">Sunday,Teusday,Thursday</label>
    <input type="checkbox" name="days" id="days1">
    <br>
    <label for="days2">Saturday,Monday,Wednesday</label>
    <input type="checkbox" name="days" id="days2">
    <br>


    <br /><br />
    <label for="number_of_hours">Number of hours of course</label>
    <input type="number" name="number_of_hours" id="number_of_hours" />
    <br /><br />
    <label for="teacher">Name language teacher</label>
    <input type="text" name="teacher" id="teacher" />
    <br /><br />
    <p>Is there a test?</p>
    <input type="radio" name="test" value="yes" id="yes" />
    <label for="yes">Yes</label>
    <br />
    <input type="radio" name="test" value="no" id="no" />
    <label for="no">No</label>
    <br /><br />


    <input type="submit" value="confirm" />
  </form>
</body>

</html>