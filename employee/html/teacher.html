<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Teacher</title>
</head>
<script>
  async function updateF() {
    $(document).on("submit", "#ee", function (e) {
      $.ajax({
        url: $(this).attr("action"),
        type: $(this).attr("method"),
        data: $(this).serialize(),
        success: async function (html) {
          let request = async () => {
            const response = await fetch("http://localhost:8083/SearchTeach");
            var book;
            const data = await response.json();
            var s = " ";
            if (data.Wrong) {
              document.getElementById("res").innerHTML = "You must enter the first name and last name or th email !"
            }
            if (data.Info != "") {
              for (let i = 0; i < data.Info.length; i++) {

                s +=
                  " <div>----------------------</div>" +
                  "<span class='sign-span'> Name :</span>" +
                  data.Info[i].Fname + " " + data.Info[i].Mname + " " + data.Info[i].LName
                "<br>" +

                  "<span class='sign-span'> Email :</span>" +
                  data.Info[i].email +
                  "<br>" +
                  "<span class='sign-span'> Subject :</span>" +
                  data.Info[i].subject +
                  "<br>"


                document.getElementById("res").innerHTML =
                  " <div class='info-sign'>Your Informaton is :</div>" + s;
              }
            }
            else {
              alert("There is no information for the entered data. Check the email or name");
            }
            await request();
          }
        }
      });
      e.preventDefault();
    });
  }





  $(document).ready(async function () {
    await updateF();
  });


</script>



<body>
  <form action="/teacher-info" method="post" id="ee">
    <label for="name">First name:</label>
    <input type="text" id="name" name="f-name" placeholder="first name" />
    <br>
    <label for="mid-name">middle name:</label>
    <input type="text" id="mid-name" name="m-name" placeholder="mid-name" />
    <br>
    <label for="l-name">last name:</label>
    <input type="text" id="l-name" name="l-name" placeholder="last name" />
    <br />
    <label for="Email">Email</label>
    <input type="text" name="Email" id="Email" placeholder="Email" />
    <input type="submit" value="Search" />
    <div id="res"></div>
    <br />
    <button type="button" onclick="window.location='/addTeacher'">Add</button>
    <br />
    <button>Edit</button>
    <br />
    <button>Delete</button>
  </form>
</body>

</html>